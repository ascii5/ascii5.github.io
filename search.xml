<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>设计模式概述</title>
      <link href="/2023/02/19/she-ji-mo-shi-gai-shu/"/>
      <url>/2023/02/19/she-ji-mo-shi-gai-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="设计模式概述及常见设计模式"><a href="#设计模式概述及常见设计模式" class="headerlink" title="设计模式概述及常见设计模式"></a>设计模式概述及常见设计模式</h1><h2 id="一，设计模式目的"><a href="#一，设计模式目的" class="headerlink" title="一，设计模式目的"></a>一，设计模式目的</h2><p>​    <strong>高内聚，低耦合</strong></p><p>​    提高代码的复用性，将变化和稳定隔离开</p><h2 id="二，设计模式原则"><a href="#二，设计模式原则" class="headerlink" title="二，设计模式原则"></a>二，设计模式原则</h2><h3 id="1，八大原则"><a href="#1，八大原则" class="headerlink" title="1，八大原则"></a>1，八大原则</h3><ul><li>依赖倒置原则</li><li>开放封闭原则</li><li>单一职责原则</li><li>替换原则</li><li>接口隔离原则</li><li>优先使用组合而不是继承</li><li>封装变化点</li><li>针对接口编程</li></ul><h3 id="2，依赖倒置原则"><a href="#2，依赖倒置原则" class="headerlink" title="2，依赖倒置原则"></a>2，依赖倒置原则</h3><blockquote><p>变化的代码应该依赖稳定的代码，具体的代码应该依赖抽象的代码</p></blockquote><h3 id="3，开放封闭原则"><a href="#3，开放封闭原则" class="headerlink" title="3，开放封闭原则"></a>3，开放封闭原则</h3><blockquote><p>源代码应该做到对扩展开放，对改变封闭</p></blockquote><h3 id="4，单一职责原则"><a href="#4，单一职责原则" class="headerlink" title="4，单一职责原则"></a>4，单一职责原则</h3><blockquote><p>类的职责应该划分清楚，单一且明确</p></blockquote><h3 id="5，替换原则"><a href="#5，替换原则" class="headerlink" title="5，替换原则"></a>5，替换原则</h3><blockquote><p>子类可以替换掉父类的作用</p></blockquote><h3 id="6，接口隔离原则"><a href="#6，接口隔离原则" class="headerlink" title="6，接口隔离原则"></a>6，接口隔离原则</h3><blockquote><p>提供的接口应当简洁完整，避免累赘</p></blockquote><h3 id="7，优先使用组合而不是继承"><a href="#7，优先使用组合而不是继承" class="headerlink" title="7，优先使用组合而不是继承"></a>7，优先使用组合而不是继承</h3><blockquote><p>组合优于继承，更加灵活，耦合度更低</p></blockquote><h3 id="8，封装变化点"><a href="#8，封装变化点" class="headerlink" title="8，封装变化点"></a>8，封装变化点</h3><blockquote><p>将变化隔离，使得一个类的变化不会影响到其他的类</p></blockquote><h3 id="9，针对接口编程"><a href="#9，针对接口编程" class="headerlink" title="9，针对接口编程"></a>9，针对接口编程</h3><blockquote><p>针对接口之间的标准化调用编程</p></blockquote><h2 id="三，单例模式"><a href="#三，单例模式" class="headerlink" title="三，单例模式"></a>三，单例模式</h2><h3 id="1，业务场景"><a href="#1，业务场景" class="headerlink" title="1，业务场景"></a>1，业务场景</h3><p>​    当某个类要求保证全局只有一个对象</p><h3 id="2，代码实现"><a href="#2，代码实现" class="headerlink" title="2，代码实现"></a>2，代码实现</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">{</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token keyword">const</span> Singleton<span class="token operator">&amp;</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">static</span> Singleton<span class="token operator">*</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> Singleton<span class="token operator">*</span> m_instance<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>Singleton<span class="token operator">*</span> Singleton<span class="token double-colon punctuation">::</span>m_instance<span class="token operator">=</span><span class="token keyword">nullptr</span><span class="token punctuation">;</span><span class="token comment">//线程非安全版本</span>Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        m_instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> m_instance<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//线程安全版本，但锁的代价过高</span>Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    Lock lock<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        m_instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> m_instance<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//双检查锁，但由于内存读写reorder不安全</span>Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>m_instance<span class="token operator">==</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Lock lock<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            m_instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> m_instance<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//C++ 11版本之后的跨平台实现 (volatile)</span>std<span class="token double-colon punctuation">::</span>atomic<span class="token operator">&lt;</span>Singleton<span class="token operator">*</span><span class="token operator">&gt;</span> Singleton<span class="token double-colon punctuation">::</span>m_instance<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>mutex Singleton<span class="token double-colon punctuation">::</span>m_mutex<span class="token punctuation">;</span>Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    Singleton<span class="token operator">*</span> tmp <span class="token operator">=</span> m_instance<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>memory_order_relaxed<span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span><span class="token function">atomic_thread_fence</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>memory_order_acquire<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取内存fence</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">lock</span><span class="token punctuation">(</span>m_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>        tmp <span class="token operator">=</span> m_instance<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>memory_order_relaxed<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            tmp <span class="token operator">=</span> <span class="token keyword">new</span> Singleton<span class="token punctuation">;</span>            std<span class="token double-colon punctuation">::</span><span class="token function">atomic_thread_fence</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>memory_order_release<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//释放内存fence</span>            m_instance<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>memory_order_relaxed<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> tmp<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="四，观察者模式"><a href="#四，观察者模式" class="headerlink" title="四，观察者模式"></a>四，观察者模式</h2><h3 id="1，业务场景-1"><a href="#1，业务场景-1" class="headerlink" title="1，业务场景"></a>1，业务场景</h3><h3 id="2，代码实现-1"><a href="#2，代码实现-1" class="headerlink" title="2，代码实现"></a>2，代码实现</h3><h2 id="五，代理模式"><a href="#五，代理模式" class="headerlink" title="五，代理模式"></a>五，代理模式</h2><h3 id="1，业务场景-2"><a href="#1，业务场景-2" class="headerlink" title="1，业务场景"></a>1，业务场景</h3><h3 id="2，代码实现-2"><a href="#2，代码实现-2" class="headerlink" title="2，代码实现"></a>2，代码实现</h3><h2 id="六，策略模式"><a href="#六，策略模式" class="headerlink" title="六，策略模式"></a>六，策略模式</h2><h3 id="1，业务场景-3"><a href="#1，业务场景-3" class="headerlink" title="1，业务场景"></a>1，业务场景</h3><h3 id="2，代码实现-3"><a href="#2，代码实现-3" class="headerlink" title="2，代码实现"></a>2，代码实现</h3><h2 id="七，装饰器模式"><a href="#七，装饰器模式" class="headerlink" title="七，装饰器模式"></a>七，装饰器模式</h2><h3 id="1，业务场景-4"><a href="#1，业务场景-4" class="headerlink" title="1，业务场景"></a>1，业务场景</h3><h3 id="2，代码实现-4"><a href="#2，代码实现-4" class="headerlink" title="2，代码实现"></a>2，代码实现</h3><h2 id="八，工厂模式"><a href="#八，工厂模式" class="headerlink" title="八，工厂模式"></a>八，工厂模式</h2><h3 id="1，业务场景-5"><a href="#1，业务场景-5" class="headerlink" title="1，业务场景"></a>1，业务场景</h3><h3 id="2，代码实现-5"><a href="#2，代码实现-5" class="headerlink" title="2，代码实现"></a>2，代码实现</h3><h2 id="九，抽象工厂模式"><a href="#九，抽象工厂模式" class="headerlink" title="九，抽象工厂模式"></a>九，抽象工厂模式</h2><h3 id="1，业务场景-6"><a href="#1，业务场景-6" class="headerlink" title="1，业务场景"></a>1，业务场景</h3><h3 id="2，代码实现-6"><a href="#2，代码实现-6" class="headerlink" title="2，代码实现"></a>2，代码实现</h3><h2 id="十，命令模式"><a href="#十，命令模式" class="headerlink" title="十，命令模式"></a>十，命令模式</h2><h3 id="1，业务场景-7"><a href="#1，业务场景-7" class="headerlink" title="1，业务场景"></a>1，业务场景</h3><h3 id="2，代码实现-7"><a href="#2，代码实现-7" class="headerlink" title="2，代码实现"></a>2，代码实现</h3><h2 id="十一，责任链模式"><a href="#十一，责任链模式" class="headerlink" title="十一，责任链模式"></a>十一，责任链模式</h2><h3 id="1，业务场景-8"><a href="#1，业务场景-8" class="headerlink" title="1，业务场景"></a>1，业务场景</h3><h3 id="2，代码实现-8"><a href="#2，代码实现-8" class="headerlink" title="2，代码实现"></a>2，代码实现</h3>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>test</title>
      <link href="/2023/02/18/test/"/>
      <url>/2023/02/18/test/</url>
      
        <content type="html"><![CDATA[<h1 id="test"><a href="#test" class="headerlink" title="test"></a>test</h1><h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6>]]></content>
      
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2023/02/18/hello-world/"/>
      <url>/2023/02/18/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
